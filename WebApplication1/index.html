<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
    <body>
        <canvas id="canvas" width="500" height="500"></canvas>
        <h1 id = "user"></h1>
        <div id ="status">
            
        </div>
        <!--Script references. -->
        <!--Reference the jQuery library. -->
        <script src="Scripts/jquery-1.6.4.min.js"></script>
        <!--Reference the SignalR library. -->
        <script src="Scripts/jquery.signalR-2.1.2.min.js"></script>
        
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="signalr/hubs"></script>
        <!--Add script to update the page and send messages.-->
        <script src="Scripts/frod.js"></script>
        <script type="text/javascript">
            var name = prompt('Enter your name:', '');
            frodo.init();

            $("body").mousemove(function(e) {
                var o = {
                    x: e.pageX,
                    y: e.pageY,
                    name: name
                }
                frodo.give(o);
            });
            

            function DrawUserPos() {
                var canvas = document.getElementById("canvas").getContext("2d");
                canvas.clearRect(0, 0, 500, 500);
                var users = frodo.recive();
                for (var key in users) {
                    var x = users[key].x;
                    var y = users[key].y;
                    var name = users[key].name;
                    canvas.beginPath();
                    canvas.arc(x, y, 5, 0, 2 * Math.PI);
                    canvas.fill();
                    canvas.font = "16px Arial";
                    canvas.fillText(name, x - 5, y - 7);
                }

            }

            setInterval(DrawUserPos, 1000 / 60);

            
        </script>
    </body>
</html>
